{% extends 'base.html' %}

{% load static %}

{% block title %}
  Produtos
{% endblock %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
<script src="{% static 'base/js/index.js' %}"></script>
{% endblock %}

{% block content %}
  <h2 class="mb-3">Produtos</h2>

  {% comment %} <a href="{% url 'products:create' %}" title="Cadastrar novo produto" class="btn btn-primary btn-sticky-bottom"><i class="bi bi-plus"></i></a> {% endcomment %}

  <div class="table-responsive">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>ID</th>
          <th>Foto</th>
          <th>Nome</th>
          <th>Preço de venda</th>
          <th>Data de validade</th>
          <th>Ativo</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
          <tr>
              <td>{{ product.id }}</td>
              <td><img src="{{ product.photo.url }}" alt="Foto do produto" height="50"></td>
              <td>{{ product.name|title }}</td>
              <td>R$ {{ product.sale_price}}</td>
              <td>{% if product.is_perishable %}{{product.expiration_date}}{% else %}Não perecível{% endif %}</td>
              <td>
                <input type="checkbox" {% if product.enabled %}checked{% endif %} data-url="{% url 'products:toggle_enabled' product.id %}" class="form-check-input">
              </td>
              {% comment %} <td>{{ product.enabled }}</td> {% endcomment %}
              {% comment %} <td class="d-flex gap-1"></td> {% endcomment %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
